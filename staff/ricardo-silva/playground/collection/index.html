<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collection</title>
</head>

<body style="background-color: black;">
    <script>
        function Collection() {
            this.count = 0
        }

        Collection.prototype.add = function (item) {
            this[this.count] = item
            this.count++
        }

        Collection.prototype.remove = function (item) {
            for (var i = 0; i < this.count; i++)
                if (this[i] === item)
                    delete this[i]
        }

        Collection.prototype.removeFirst = function (item) {
            for (var i = 0; i < this.count; i++)
                if (this[i] === item) {
                    delete this[i]

                    return
                }
        }

        Collection.prototype.update = function (target, replacement) {
            for (var i = 0; i < this.count; i++)
                if (this[i] === target)
                    this[i] = replacement
        }

        Collection.prototype.updateFirst = function (target, replacement) {
            for (var i = 0; i < this.count; i++)
                if (this[i] === target) {
                    this[i] = replacement

                    return
                }
        }

        Collection.prototype.push = function(item) {
            this[this.count] = item
            this.count++

            return this.count
        }

        Collection.prototype.pop = function() {
            const lastItem = this[this.count - 1]
            delete this[this.count - 1]
            this.count--

            return lastItem
        }

        // TODO implement Collection.prototype.includes

        Collection.prototype.includes = function (searchItem, fromIndex) {
            // CollectionÂ {0: 'red', 1: 'green', 2: 'blue', count: 3}

            // searchItem green, fromIndex 0
            // compare value at 0 with searchItem
            // compare value at 1 with searchItem
            // return true

            // searchItem green, fromIndex 1
            // compare value at 1 with searchItem
            // return true

            // searchItem green, fromIndex 2
            // compare value at 2 with searchItem
            // return false

            /*
            if (fromIndex === undefined)
                for (let i = 0; i < this.count; i++) {
                    const item = this[i]

                    if (item === searchItem) return true
                }
            else if (fromIndex >= 0)
                for (let i = fromIndex; i < this.count; i++) {
                    const item = this[i]

                    if (item === searchItem) return true
                }
            */

            //Manera resumida de aplicar lo anterior

            if (fromIndex === undefined) fromIndex = 0

            for (let i = fromIndex; i < this.count; i++) {
                const item = this[i]

                if (item === searchItem) return true
            }

            return false
        }


        // TODO implement Collection.prototype.indexOf
        // TODO implement Collection.prototype.reverse

        // TODO jodlin: Collection.prototype.sort


        // El shift vendria a ser un desplazamiento de elementos
        /* Collection.prototype.shift = function () {
            const firstItem = this[0]
            this.count--
            for(let i = 0; i < this.count; i++)
                this[i] = this[i + 1]

            delete this[this.count]
            return firstItem
        }
        */

        Collection.prototype.shift = function() {
            // Collection {0: 3.141516, 1: 666, 2: 2000, count: 3}
            // keep 3.141516
            // Collection {0: 666, 1: 666, 2: 2000, count: 3}
            // Collection {0: 666, 1: 2000, 2: 2000, count: 3}
            // Collection {0: 666, 1: 2000, 2: 2000, count: 2}
            // Collection {0: 666, 1: 2000, count: 2}
            // return 3.141516

            const firstItem = this[0]

            for (let i = 1; i < this.count; i++) {
                const item = this[i]

                this[i - 1] = item
            }

            this.count--

            delete this[this.count]

            return firstItem
        }


        // test

        const names = new Collection()
        names.add('Juan')
        names.add('Sergio')
        names.add('Laura')
        names.add('Albert')
        names.add('Sergio')

        const colors = new Collection()
        colors.add('red')
        colors.add('green')
        colors.add('blue')

        const nums = new Collection()
        nums.add(3.141516) // PI
        nums.add(666) // (..)
        nums.add(2000)

// guardar como add collection constructor base code

    </script>
</body>

</html>

